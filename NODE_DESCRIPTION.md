# MyPet Analytics Node - åŠŸèƒ½æè¿°

## ä¸­æ–‡æè¿°

### ğŸ¯ èŠ‚ç‚¹æ¦‚è¿°
MyPet Analytics æ˜¯ä¸€ä¸ªä¸“ä¸º MyPet Stocks äº¤æ˜“æ•°æ®è®¾è®¡çš„é«˜çº§åˆ†æèŠ‚ç‚¹ï¼Œæä¾›å…¨é¢çš„äº¤æ˜“ç»©æ•ˆåˆ†æã€é£é™©è¯„ä¼°å’Œå¯è§†åŒ–æŠ¥å‘ŠåŠŸèƒ½ã€‚

### ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

#### 1. **åŸºç¡€ç»Ÿè®¡åˆ†æ (Basic Statistics)**
- **äº¤æ˜“æ¦‚è§ˆ**: æ€»äº¤æ˜“æ•°ã€å·²å¹³ä»“äº¤æ˜“ã€æœªå¹³ä»“äº¤æ˜“ç»Ÿè®¡
- **ç›ˆäºæ±‡æ€»**: æ€»ç›ˆåˆ©ã€æ€»ä½£é‡‘ã€å‡€ç›ˆåˆ©è®¡ç®—
- **å“ç§åˆ†å¸ƒ**: æŒ‰äº¤æ˜“å“ç§ç»Ÿè®¡äº¤æ˜“æ•°é‡åˆ†å¸ƒ
- **æ•°æ®å¯¹æ¯”**: è®¡ç®—å€¼ä¸ API æä¾›æ•°æ®çš„å¯¹æ¯”éªŒè¯
- **æ™ºèƒ½æ´å¯Ÿ**: åŸºäºæ•°æ®è‡ªåŠ¨ç”Ÿæˆäº¤æ˜“å»ºè®®

#### 2. **ç›ˆåˆ©åˆ†æ (Profit Analysis)**
- **èƒœç‡è®¡ç®—**: ç›ˆåˆ©äº¤æ˜“å æ¯”å’Œèƒœç‡ç»Ÿè®¡
- **ç›ˆäºæ¯”åˆ†æ**: å¹³å‡ç›ˆåˆ©ä¸å¹³å‡äºæŸæ¯”è¾ƒ
- **ç›ˆåˆ©å› å­**: æ€»ç›ˆåˆ©ä¸æ€»äºæŸçš„æ¯”å€¼è®¡ç®—
- **ç›ˆåˆ©åˆ†å¸ƒ**: æŒ‰ç›ˆåˆ©åŒºé—´ç»Ÿè®¡äº¤æ˜“åˆ†å¸ƒ
- **æœ€å¤§ç›ˆäº**: å•ç¬”æœ€å¤§ç›ˆåˆ©å’Œæœ€å¤§äºæŸè®°å½•
- **äº¤æ˜“æ´å¯Ÿ**: é’ˆå¯¹ç›ˆåˆ©æ¨¡å¼çš„ä¸“ä¸šå»ºè®®

#### 3. **é£é™©è¯„ä¼° (Risk Metrics)**
- **æ³¢åŠ¨ç‡åˆ†æ**: äº¤æ˜“æ”¶ç›Šçš„æ ‡å‡†å·®å’Œæ³¢åŠ¨æ€§
- **æœ€å¤§å›æ’¤**: ä»å³°å€¼åˆ°è°·å€¼çš„æœ€å¤§æŸå¤±ç™¾åˆ†æ¯”
- **é£é™©ä»·å€¼ (VaR)**: 95% ç½®ä¿¡åº¦ä¸‹çš„æ½œåœ¨æŸå¤±
- **å¤æ™®æ¯”ç‡**: é£é™©è°ƒæ•´åçš„æ”¶ç›Šç‡æŒ‡æ ‡
- **é£é™©ç­‰çº§**: åŸºäºå¤šé¡¹æŒ‡æ ‡çš„ç»¼åˆé£é™©è¯„çº§
- **é«˜çº§ç»Ÿè®¡**: ååº¦ã€å³°åº¦ç­‰é«˜çº§é£é™©æŒ‡æ ‡

#### 4. **ç»©æ•ˆåˆ†æ (Performance Summary)**
- **ç»¼åˆè¯„åˆ†**: åŸºäºå¤šç»´åº¦æŒ‡æ ‡çš„äº¤æ˜“ç»©æ•ˆè¯„åˆ† (0-100)
- **ç­‰çº§è¯„å®š**: A+, A, B, C, D, F ç­‰çº§è¯„å®šç³»ç»Ÿ
- **ç»©æ•ˆåˆ†è§£**: ç›ˆåˆ©èƒ½åŠ›ã€ä¸€è‡´æ€§ã€é£é™©ç®¡ç†ã€æ•ˆç‡å››ä¸ªç»´åº¦
- **å¯¹æ¯”åŸºå‡†**: ä¸è¡Œä¸šæ ‡å‡†çš„å¯¹æ¯”åˆ†æ
- **æ”¹è¿›å»ºè®®**: åŸºäºç»©æ•ˆåˆ†æçš„å…·ä½“æ”¹è¿›å»ºè®®

### ğŸ“ˆ å¯è§†åŒ–åŠŸèƒ½

#### 1. **å›¾è¡¨æ•°æ®ç”Ÿæˆ**
- **é¥¼å›¾**: ç›ˆäºåˆ†å¸ƒã€å“ç§åˆ†å¸ƒå¯è§†åŒ–
- **æŸ±çŠ¶å›¾**: é£é™©æŒ‡æ ‡ã€ç»©æ•ˆå¯¹æ¯”å›¾è¡¨
- **æ•°æ®æ ¼å¼**: æ ‡å‡†åŒ–çš„å›¾è¡¨æ•°æ®ç»“æ„ï¼Œæ”¯æŒå¤šç§å›¾è¡¨åº“

#### 2. **HTML æŠ¥å‘Šç”Ÿæˆ**
- **å®Œæ•´æŠ¥å‘Š**: åŒ…å«æ‰€æœ‰åˆ†æç»“æœçš„ä¸“ä¸š HTML æŠ¥å‘Š
- **å†…åµŒå›¾è¡¨**: Base64 ç¼–ç çš„å›¾è¡¨ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–
- **é‚®ä»¶å‹å¥½**: é€‚åˆé‚®ä»¶å‘é€çš„è‡ªåŒ…å« HTML æ ¼å¼
- **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡æŸ¥çœ‹
- **ä¸“ä¸šæ ·å¼**: ç°ä»£åŒ–çš„æŠ¥å‘Šè®¾è®¡å’Œå¸ƒå±€

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§

#### 1. **æ•°æ®å…¼å®¹æ€§**
- **å¤šæ ¼å¼æ”¯æŒ**: æ”¯æŒ ordersã€tradesã€data ç­‰å¤šç§æ•°æ®æ ¼å¼
- **åµŒå¥—ç»“æ„**: è‡ªåŠ¨è¯†åˆ« result.results.data ç­‰å¤æ‚ç»“æ„
- **å®¹é”™å¤„ç†**: æ™ºèƒ½å¤„ç†ç¼ºå¤±å­—æ®µå’Œå¼‚å¸¸æ•°æ®
- **å­—æ®µæ˜ å°„**: è‡ªåŠ¨æ˜ å°„ä¸åŒå‘½åçš„ç›¸åŒå­—æ®µ

#### 2. **æ€§èƒ½ä¼˜åŒ–**
- **é«˜æ•ˆå¤„ç†**: ä¼˜åŒ–çš„æ•°æ®å¤„ç†ç®—æ³•
- **å†…å­˜ç®¡ç†**: åˆç†çš„å†…å­˜ä½¿ç”¨å’Œåƒåœ¾å›æ”¶
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æ•è·å’Œé”™è¯¯æ¢å¤
- **è°ƒè¯•å‹å¥½**: è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯

#### 3. **æ‰©å±•æ€§**
- **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„åŠŸèƒ½æ¨¡å—åˆ†ç¦»
- **æ˜“äºç»´æŠ¤**: ç»“æ„åŒ–çš„ä»£ç ç»„ç»‡
- **ç‰ˆæœ¬æ§åˆ¶**: å®Œæ•´çš„ç‰ˆæœ¬ç®¡ç†å’Œæ›´æ–°æœºåˆ¶

### ğŸ’¼ ä½¿ç”¨åœºæ™¯

#### 1. **ä¸ªäººäº¤æ˜“è€…**
- åˆ†æä¸ªäººäº¤æ˜“ç»©æ•ˆ
- è¯†åˆ«äº¤æ˜“æ¨¡å¼å’Œé—®é¢˜
- åˆ¶å®šæ”¹è¿›ç­–ç•¥

#### 2. **æŠ•èµ„æœºæ„**
- è¯„ä¼°äº¤æ˜“å‘˜ç»©æ•ˆ
- é£é™©ç®¡ç†å’Œæ§åˆ¶
- åˆè§„æŠ¥å‘Šç”Ÿæˆ

#### 3. **é‡åŒ–å›¢é˜Ÿ**
- ç­–ç•¥å›æµ‹åˆ†æ
- é£é™©æŒ‡æ ‡ç›‘æ§
- ç»©æ•ˆåŸºå‡†å¯¹æ¯”

---

## English Description

### ğŸ¯ Node Overview
MyPet Analytics is an advanced analysis node specifically designed for MyPet Stocks trading data, providing comprehensive trading performance analysis, risk assessment, and visualization reporting capabilities.

### ğŸ“Š Core Features

#### 1. **Basic Statistics Analysis**
- **Trading Overview**: Total trades, closed trades, and open trades statistics
- **P&L Summary**: Total profit, total commission, and net profit calculations
- **Symbol Distribution**: Trading volume distribution by trading instruments
- **Data Comparison**: Validation between calculated values and API-provided data
- **Smart Insights**: Automated trading recommendations based on data analysis

#### 2. **Profit Analysis**
- **Win Rate Calculation**: Percentage of profitable trades and win rate statistics
- **Profit/Loss Ratio**: Comparison between average wins and average losses
- **Profit Factor**: Ratio calculation of total profits to total losses
- **Profit Distribution**: Trading distribution by profit ranges
- **Extreme Values**: Largest single profit and loss records
- **Trading Insights**: Professional recommendations for profit patterns

#### 3. **Risk Assessment**
- **Volatility Analysis**: Standard deviation and volatility of trading returns
- **Maximum Drawdown**: Maximum loss percentage from peak to trough
- **Value at Risk (VaR)**: Potential loss at 95% confidence level
- **Sharpe Ratio**: Risk-adjusted return indicator
- **Risk Level**: Comprehensive risk rating based on multiple metrics
- **Advanced Statistics**: Skewness, kurtosis, and other advanced risk indicators

#### 4. **Performance Summary**
- **Composite Score**: Multi-dimensional trading performance score (0-100)
- **Grade Rating**: A+, A, B, C, D, F grading system
- **Performance Breakdown**: Four dimensions - profitability, consistency, risk management, efficiency
- **Benchmark Comparison**: Analysis against industry standards
- **Improvement Suggestions**: Specific recommendations based on performance analysis

### ğŸ“ˆ Visualization Features

#### 1. **Chart Data Generation**
- **Pie Charts**: Profit/loss distribution and symbol distribution visualization
- **Bar Charts**: Risk metrics and performance comparison charts
- **Data Format**: Standardized chart data structure supporting multiple chart libraries

#### 2. **HTML Report Generation**
- **Complete Reports**: Professional HTML reports containing all analysis results
- **Embedded Charts**: Base64-encoded charts with no external dependencies
- **Email-Friendly**: Self-contained HTML format suitable for email delivery
- **Responsive Design**: Support for desktop and mobile device viewing
- **Professional Styling**: Modern report design and layout

### ğŸ”§ Technical Features

#### 1. **Data Compatibility**
- **Multi-Format Support**: Support for orders, trades, data, and other data formats
- **Nested Structures**: Automatic recognition of complex structures like result.results.data
- **Fault Tolerance**: Intelligent handling of missing fields and abnormal data
- **Field Mapping**: Automatic mapping of differently named identical fields

#### 2. **Performance Optimization**
- **Efficient Processing**: Optimized data processing algorithms
- **Memory Management**: Reasonable memory usage and garbage collection
- **Error Handling**: Comprehensive exception catching and error recovery
- **Debug-Friendly**: Detailed execution logs and debugging information

#### 3. **Extensibility**
- **Modular Design**: Clear functional module separation
- **Easy Maintenance**: Structured code organization
- **Version Control**: Complete version management and update mechanism

### ğŸ’¼ Use Cases

#### 1. **Individual Traders**
- Analyze personal trading performance
- Identify trading patterns and issues
- Develop improvement strategies

#### 2. **Investment Institutions**
- Evaluate trader performance
- Risk management and control
- Compliance report generation

#### 3. **Quantitative Teams**
- Strategy backtesting analysis
- Risk metric monitoring
- Performance benchmark comparison

---

## ğŸš€ Quick Start

### Installation
```bash
# In n8n Community Nodes settings
npm install n8n-nodes-mypet-analytics
```

### Basic Usage
1. Connect MyPet Stocks API node output to MyPet Analytics input
2. Select analysis type (Basic/Profit/Risk/Performance)
3. Configure chart and report options
4. Execute workflow to get analysis results

### Output Format
```json
{
  "analysis": {
    "summary": { /* Analysis results */ },
    "insights": [ /* Recommendations */ ]
  },
  "metadata": {
    "version": "1.0.13",
    "timestamp": "2025-06-22T...",
    "dataPoints": 150
  },
  "charts": [ /* Chart data (if enabled) */ ],
  "htmlReport": "<!-- HTML report (if enabled) -->"
}
```
